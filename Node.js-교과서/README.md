## Node.js 교과서

웹서버프로그래밍 수업의 교재로 사용하여 공부를 시작하였습니다.

### 노드는 무엇인가?
노드는 이벤트 기반으로 동작합니다. 이벤트 기반이란 이벤트가 발생할 때 미리 저장해둔 작업을 수행하는 것을 말합니다. 따라서 이벤트를 관리하기 위한 구조가 존재합니다. 구조의 구성요소는 다음과 같습니다.
- 이벤트 루프: 이벤트 발생 시 호출할 콜백 함수들을 관리한다. 노드가 종료될 때까지 루프를 돌면서 이벤트 처리를 계속하므로 루프라고 부른다.
- 호출 스택: 함수의 호출 순서가 저장되어 있는 곳이다.
- 백드라운드: setTimout, setImmediate와 같은 타이머나 특정 이벤트가 대기하는 곳이다.
- 태스크 큐: 백그라운드가 저장된 이벤트의 콜백 함수를 보내는 곳이다. 이벤트 루프가 호출 스택으로 함수를 보내준다. 

따라서 노드는 위의 구성요소들을 사용하여 이벤트를 처리합니다.

노드는 싱글 스레드, 논 블로킹 모델입니다. 따라서 입력은 한 곳에서 받지만 순서대로 처리하지 않고 결과가 나오는대로 반환을 해줍니다. 따라서 노드의 장점은 다음과 같습니다.
- 웹 개발을 할 때 자바스크 사용하므로 서버를 노드로 사용하면 하나의 언어로 웹 사이트를 개발할 수 있다.
- 싱글 스레드, 논 블로킹 모델이라 서버의 무리가 적다.
- npm을 통한 다양한 모듈을 사용할 수 있다.

다음은 노드의 단점입니다.
- 싱글 스레드로 동작하기 때문에 서버가 종료되면 프로그램 전체에 영향을 끼친다.
- CPU 연산을 많이 요구하는 작업은 서버의 무리를 준다.
- 논 블로킹을 사용하므로 서버의 로직이 복잡할 경우 콜백함수의 늪에 빠질 수 있다.

장단점을 비교해보았을 때 노드는 개수가 많지만 작업의 크기가 크지 않은 I/O 서비스에 적합합니다. 예를 들면 실시간 채팅 어플리케이션, 네트워크 스트리밍 서비스가 있습니다.

---

### 비동기 처리
> 클라이언트를 믿지 말라는 말이 있을 정도로 프런트엔드에 민감한 데이터를 내려보내는 것은 실수입니다.

노드는 논 블로킹 모델을 사용하기 때문에 비동기 처리는 필수적으로 사용하게 됩니다. 비동기 처리란 코드 실행이 완료될 때까지 기다리지 않고 다음 코드를 실행하는 것을 말합니다. 따라서 코드를 실행했을 때 결과를 반환하는 것을 보장할 수 없습니다. 노드에서는 Promise와 async/await를 사용합니다. 해당 내용은 예제와 함께 개발 블로그에 정리해두었으니 링크로 대체하겠습니다.

- promise: [[Node] 비동기 처리 - Promise](https://hangjastar.tistory.com/235)
- async/await: [[Node] 비동기 처리 - async/await](https://hangjastar.tistory.com/237)

---

### http 모듈로 서버 만들기
